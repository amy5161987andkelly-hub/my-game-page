<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœªä¾†é è¨€æ©Ÿ - æŠ½ç±¤éŠæˆ²</title>
    <!-- è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- é…ç½® Tailwind ä»¥ä½¿ç”¨ Inter å­—é«”å’Œè‡ªè¨‚é¡è‰² -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'cosmic-dark': '#0a0a2a', // æ·±é‚ƒçš„å®‡å®™è—é»‘
                        'star-glow': '#4ade80',  // è¢å…‰ç¶ è‰²å…‰èŠ’
                        'vortex': '#1f2937',     // é»‘æ´å…§éƒ¨é¡è‰²
                    },
                    keyframes: {
                        'pulse-glow': {
                            '0%, 100%': { boxShadow: '0 0 5px #4ade80, 0 0 10px #4ade80, 0 0 15px #4ade80' },
                            '50%': { boxShadow: '0 0 20px #22c55e, 0 0 30px #22c55e, 0 0 40px #22c55e' },
                        },
                        'spin-vortex': {
                            '0%': { transform: 'rotate(0deg)' },
                            '100%': { transform: 'rotate(360deg)' },
                        },
                        'reveal-scale': {
                            '0%': { transform: 'scale(0.8)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        }
                    },
                    animation: {
                        'pulse-glow': 'pulse-glow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'spin-slow': 'spin-vortex 20s linear infinite',
                        'reveal': 'reveal-scale 0.5s ease-out forwards',
                    }
                }
            }
        }
    </script>
    <style>
        /* è‡ªè¨‚æ¨£å¼ï¼Œä½¿é»‘æ´è¦–è¦ºæ›´å…·å¸å¼•åŠ› */
        .black-hole-vortex {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle at center, #111827 0%, #0a0a2a 70%, transparent 100%);
            border: 4px solid rgba(74, 222, 128, 0.3); /* é‚Šç·£å¾®å…‰ */
            box-shadow: 0 0 50px rgba(74, 222, 128, 0.5);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* æ¨¡æ“¬é»‘æ´å‘¨åœçš„èƒ½é‡æ—‹æ¸¦ */
        .black-hole-vortex::before {
            content: '';
            position: absolute;
            width: 400px;
            height: 400px;
            border: 5px dashed rgba(74, 222, 128, 0.1);
            border-radius: 50%;
            animation: spin-vortex 40s linear infinite reverse;
        }

        .black-hole-vortex::after {
            content: '';
            position: absolute;
            width: 350px;
            height: 350px;
            border: 3px dotted rgba(74, 222, 128, 0.05);
            border-radius: 50%;
            animation: spin-vortex 30s linear infinite;
        }

        .star-button {
            transition: all 0.2s ease-in-out;
            transform-origin: center;
        }

        .star-button:hover {
            transform: scale(1.1);
            filter: brightness(1.2);
        }

        .star-button:active {
            transform: scale(0.95);
        }

        .card-result-img {
            max-width: 100%;
            height: auto;
            border-radius: 0.75rem;
            animation: none; /* åˆå§‹ä¸æ’­æ”¾å‹•ç•« */
            box-shadow: 0 0 20px rgba(74, 222, 128, 0.6);
        }

        /* ç•¶æŠ½å¡ä¸­æ™‚ï¼Œé»‘æ´å…‰èŠ’åŠ å¼· */
        .drawing-card-pulse {
            animation: pulse-glow 1s ease-in-out infinite alternate;
        }
    </style>
</head>
<body class="bg-cosmic-dark text-white font-sans min-h-screen flex items-center justify-center p-4">

    <!-- å¤–å±¤å®¹å™¨ï¼šç§»é™¤ text-centerï¼Œæ”¹ç‚º flex å±…ä¸­æ‰€æœ‰å…§å®¹ -->
    <div class="w-full max-w-4xl flex flex-col items-center">
        <!-- æ¨™é¡Œèˆ‡ç°¡ä»‹å€å¡Š -->
        <div class="w-full text-center">
            <!-- ä¸»æ¨™é¡Œï¼šç½®ä¸­ (text-center) -->
            <h1 class="text-4xl sm:text-5xl font-extrabold mb-4 text-star-glow drop-shadow-lg tracking-wider text-center">
                æœªä¾†ä¸–ç•Œçš„<br>æŠ½ç±¤
            </h1>
            
            <!-- å‰¯æ¨™é¡Œï¼šç½®å·¦ (text-left) ä¸”é †æ’ï¼ˆç„¡ <br>ï¼‰ï¼Œä½†æ•´å€‹å€å¡Šç½®ä¸­ (mx-auto) ä¸”å¯¬åº¦é©ä¸­ (max-w-md) -->
            <p class="text-gray-400 mb-12 text-lg max-w-md mx-auto text-left">
                é€éé‡å­é»‘æ´ï¼ŒæŠ½å–æ‚¨æœªä¾†çš„å‘½é‹å¡ç‰‡ã€‚
            </p>
        </div>

        <!-- ä¸»è¦éŠæˆ²è¦–åœ–å®¹å™¨ï¼Œç”¨æ–¼ç®¡ç†æŠ½å¡å€å’Œè®€å–å€çš„é¡¯ç¤º -->
        <div id="gameViewContainer" class="flex flex-col items-center justify-center min-h-[50vh]">

            <!-- 1. æŠ½å¡å€åŸŸ (åˆå§‹é¡¯ç¤º) -->
            <div id="drawArea" class="black-hole-vortex mx-auto transition duration-500 ease-in-out transform">
                <!-- æ˜Ÿæ˜ŸæŒ‰éˆ• - è§¸ç™¼æŠ½ç±¤ -->
                <button id="starButton" class="star-button bg-star-glow text-cosmic-dark p-6 rounded-full font-bold uppercase text-2xl animate-pulse-glow z-10 hover:ring-8 hover:ring-star-glow/50 focus:outline-none" onclick="drawCard()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                    </svg>
                </button>
            </div>

            <!-- 2. å‚³é€ä¸­/è®€å–ä¸­ å€åŸŸ (ä¸­é–“ç‹€æ…‹) -->
            <div id="loadingContainer" class="hidden flex flex-col items-center justify-center h-[300px] w-[300px] mx-auto">
                <div class="text-star-glow text-6xl animate-spin-slow">ğŸŒ€</div>
                <p class="mt-4 text-xl text-gray-400">å‚³é€ä¸­... æ­£åœ¨è§£è®€æœªä¾†ä¿¡è™Ÿ...</p>
            </div>

        </div>
    </div>

    <!-- 3. çµæœå¡ç‰‡é¡¯ç¤ºè¦†è“‹å±¤ (ç½®ä¸­é¡¯ç¤ºå¡ç‰‡) -->
    <div id="cardResultOverlay" class="hidden fixed inset-0 bg-cosmic-dark/95 flex flex-col p-4 z-50 overflow-y-auto">
        
        <!-- å¡ç‰‡è³‡è¨Šå€å¡Š - ä½¿ç”¨ my-8 å¢åŠ å‚ç›´é‚Šè·ï¼Œç¢ºä¿å…§å®¹ä¸æœƒé ‚åˆ°è¢å¹•é‚Šç·£ -->
        <!-- ä½¿ç”¨ mx-auto ä¿æŒæ°´å¹³ç½®ä¸­ -->
        <div class="w-full max-w-2xl bg-vortex/60 p-6 sm:p-8 rounded-xl shadow-2xl backdrop-blur-sm mx-auto my-8">
            
            <h2 class="text-3xl sm:text-4xl font-extrabold mb-6 text-star-glow text-center drop-shadow-md animate-reveal">
                æœªä¾†é è¨€å¡
            </h2>

            <!-- å¡ç‰‡åœ–ç‰‡èˆ‡æ–‡å­—è³‡è¨Šå€ -->
            <div class="flex flex-col items-center space-y-6">
                
                <!-- å¡ç‰‡åœ–ç‰‡å®¹å™¨ -->
                <div id="cardImageContainer" class="relative max-w-xs w-full max-h-[50vh] flex items-center justify-center">
                    <!-- Card image will be placed here -->
                </div>

                <!-- é ç•™ä½ç½® 1: å¡ç‰‡åç¨± -->
                <h3 id="cardNameDisplay" class="text-2xl sm:text-3xl font-bold text-white/90 text-center border-b border-star-glow/30 pb-2 animate-reveal w-full">
                    <!-- å¡ç‰‡åç¨±ä½”ä½ç¬¦ -->
                </h3>

                <!-- é ç•™ä½ç½® 2: é è¨€æ–‡å­— -->
                <!-- ä¿®æ­£: ç§»é™¤ font-lishuï¼Œæ¢å¾©ä½¿ç”¨ font-sans (é»‘é«”) -->
                <div id="prophecyTextDisplay" class="bg-cosmic-dark/50 p-4 rounded-lg text-lg text-gray-300 shadow-inner w-full text-center animate-reveal border border-star-glow/10 whitespace-pre-wrap">
                    <!-- é è¨€æ–‡å­—ä½”ä½ç¬¦ -->
                </div>

            </div>
        </div>

        <!-- è¿”å›æŒ‰éˆ• (åœ¨å¡ç‰‡è³‡è¨Šå€å¡Šä¸‹æ–¹) -->
        <button id="returnButton" onclick="resetGame()" class="mt-10 mb-8 px-8 py-3 bg-white/10 text-star-glow font-bold rounded-xl hover:bg-white/20 transition duration-300 shadow-xl focus:outline-none mx-auto">
            è¿”å›é»‘æ´
        </button>
    </div>

    <script type="text/javascript">
        // JavaScript é‚è¼¯é–‹å§‹

        // ä¿®æ­£å¡ç‰Œç¸½æ•¸ç‚º 61 å¼µ
        const totalCards = 61; // ç¸½å…±æœ‰ 61 å¼µå¡ç‰‡ (card_0 (1) åˆ° card_0 (61))
        
        // å…¨å±€è®Šæ•¸å’Œ DOM å…ƒç´ 
        const drawArea = document.getElementById('drawArea'); // é»‘æ´/æ˜Ÿæ˜Ÿå€åŸŸ
        const starButton = document.getElementById('starButton');
        const loadingContainer = document.getElementById('loadingContainer'); // è®€å–ä¸­çš„æ—‹æ¸¦
        const cardResultOverlay = document.getElementById('cardResultOverlay'); // é¡¯ç¤ºçµæœçš„è¦†è“‹å±¤
        const cardImageContainer = document.getElementById('cardImageContainer'); // æ”¾ç½®åœ–ç‰‡çš„å®¹å™¨
        
        // æ–°å¢çš„å¡ç‰‡åç¨±å’Œé è¨€é¡¯ç¤ºå…ƒç´ 
        const cardNameDisplay = document.getElementById('cardNameDisplay');
        const prophecyTextDisplay = document.getElementById('prophecyTextDisplay');


        const drawDuration = 3000; // æŠ½å¡å‹•ç•«æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰

        /**
         * é è¨€è³‡æ–™çµæ§‹ (Placeholder / ä½”ä½ç¬¦)
         * é™£åˆ—ç´¢å¼• 0 ä¸ä½¿ç”¨ï¼Œå¡ç‰‡ç·¨è™Ÿå¾ 1 é–‹å§‹åˆ° 61ã€‚
         * è«‹åœ¨æä¾›è³‡æ–™å¾Œï¼Œç”¨å¯¦éš›çš„ 61 ç­† { name: "...", prophecy: "..." } ç‰©ä»¶æ›¿æ›æ­¤è™•ã€‚
         */
        const cardProphecyData = [
            null, // ä½”ä½ç¬¦ï¼Œä½¿å¡ç‰‡ç·¨è™Ÿèˆ‡é™£åˆ—ç´¢å¼•ä¸€è‡´
            // å¡ç‰Œ 1 åˆ° 29 çš„å¯¦éš›è³‡æ–™ (æ ¹æ“šä½¿ç”¨è€…æä¾›çš„å…§å®¹è²¼ä¸Š)
            { name: "æ­¡æ¨‚é¨è»Šè¶£", prophecy: "é›£å¾—çš„é¨è»Šä¹‹æ—…ï¼Œé¢¨å¾å¾åœ°å¹ï¼Œå¿ƒæƒ…ä¹Ÿæ ¼å¤–èˆ’æš¢èµ·ä¾†ã€‚" }, 
            { name: "ç¨æ”¬ç¾¤å³°", prophecy: "ä¸€éš»ç†Šåœ¨å±±å·”çœ‹å‘é›²æµ·èˆ‡ç¾¤å³°ï¼Œæ„œæ„ä¸­ä¸å…æœ‰ä¸€çµ²å­¤ç¨ã€‚" },
            { name: "ç¤¾ç•œçš„ä¸€å¤©", prophecy: "è¾¦å…¬ä¸å…ä¿—è¦é¢å°æ»”æ»”ä¸çµ•çš„æŠ±æ€¨èˆ‡éœ€æ±‚ï¼ŒçœŸæ˜¯ç´¯äººçš„ä¸€å¤©ã€‚" },
            { name: "ç•°åœ‹ä¸Šå¤ä¸‰ç¥", prophecy: "è³å–„ç½°æƒ¡ï¼Œä»¥æ»…äº¡ä¸€åˆ‡ç‚ºæ¸…é›¶æ‰‹æ®µæ›å–å¾—æ–°ç”Ÿã€‚" },
            { name: "å—åˆ‘ä¹‹è‹¦", prophecy: "å¤©åˆ‘é™è‡³ï¼ŒæƒŸæœ‰åƒçš„è‹¦ä¸­è‹¦ï¼Œæ–¹ç‚ºç†Šä¸Šç†Šã€‚" },
            { name: "å‡å®˜åœˆå¥—", prophecy: "ç”œèœœçš„è©±èªï¼Œé€šå¸¸æ˜¯é™·é˜±ä½ˆä¸‹çš„èª˜é¤Œï¼Œå°å¿ƒç‚ºä¸Šï¼" },
            { name: "è®Šå½¢å…”ä¸‰æ…‹", prophecy: "æœ€æº«æŸ”çš„å°ç™½å…”ï¼Œç™¼èµ·é£†èµ·ä¾†å»æ˜¯æœ€ç«çˆ†çš„ã€‚åˆ¥æŒ‘æˆ°ä»–äººçš„åº•ç·šã€‚" },
            { name: "å¼·è¿«èˆ‡é€ƒå…µ", prophecy: "é£›å¤©å…”é­é‡å±åå£“æ¦¨ï¼Œåˆé‡æºœå†°å…¬ä¸»é€ƒè·‘ï¼Œç‡ƒèµ·æ€’ç«ã€‚" },
            { name: "ç¸½é‹ªå¸«é˜¿æƒ å§", prophecy: "å–„è‰¯åˆæº«æš–çš„é˜¿æƒ å§ï¼Œç…§é¡§ä½ çš„èƒƒä¹Ÿç…§é¡§ä½ çš„å¿ƒã€‚" },
            { name: "ç†Šæ³¢å‹•", prophecy: "ç§‘æŠ€ç†Šé›·éœ†ä¹‹æ€’ç™¼å‡ºæ³¢å‹•æ”»æ“Šï¼Œéœ‡æ”ä¸€åˆ‡å¦–å­½" },
            { name: "æ¼‚ä½©ä¹‹ç†Š", prophecy: "ç§‘æŠ€ç†Šåšäº†è‡ªå·±æœ‰èˆˆè¶£çš„äº‹æƒ…ï¼Œæ²‰é†‰åœ¨ä»–çš„å°å¤©åœ°ï½å¤©åœ°èˆ‡äººåˆä¸€ã€‚" },
            { name: "ä¸‰å±å", prophecy: "é—œé–€å¤©åã€ç¸½ä¹‹å‰¯åã€æ¨å‡ºå»å…¬ä¸»ï¼Œåˆ‡è¨˜è¦é é›¢ä»–å€‘ï¼Œæ‰èƒ½é€¢å‡¶åŒ–å‰ã€‚" },
            { name: "èƒ¡æ‰¯å¤§æœƒ", prophecy: "å¤©å¸«åœ˜æ»¿å£èƒ¡è¨€ã€æ¨è«‰å¸è²¬ï¼ŒäºŒåç™¼å‹•ä¸æ²¾é‹æŠ€èƒ½ï¼Œéæ°´å‰‡é€ƒã€‚èˆ‡ä¹‹å…±äº‹ï¼Œè¦å­—äº†å¾—ã€‚" },
            { name: "æ¤ªé¢¨èˆ‡è£å‚»", prophecy: "å¤©å¸«æ–‡æ»¿å˜´poã€é»‘é–€å¿—yes sir manï¼Œé‚„æœ‰ä¸€å€‹éƒ½ä¸æ‡‚ï¼Œé ˜äº†8è¬8ï¼Œé‡äº‹éƒ½èªªéå°ˆæ¥­ã€‚" },
            { name: "ç„¡ç†å–é¬§èˆ‡éµç…§è¾¦ç†", prophecy: "é³³æ¢¨å¤©åä¸‹ä»¤å„ç¨®è«‹å•ï¼Œç›´æ’å…¬ä¸»å£å«Œé«”æ­£å€¼ï¼Œå®‡å®™å¤§é¡§å•è»å¸«ã€‚" },
            { name: "æ·±æµ·é¾ç‹", prophecy: "æµ·ç•Œéœ¸ä¸»ï¼Œç¸±ç®¡æµ·é‚Šå¤§å°äº‹å‹™ï¼Œä¿—åï¼šç®¡å¾ˆå¯¬ã€‚" },
            { name: "é…·åˆ‘èˆ‡æ•‘æ´", prophecy: "è‹¦é›£é™è‡¨é£½å—æŠ˜ç£¨ï¼Œè¦ç›¸ä¿¡çƒé›²éå¾Œç¸½æœƒæœ‰ä¸€çµ²æ›™å…‰ç…§é€²é™°å½±ã€‚" },
            { name: "éå»èˆ‡æœªä¾†", prophecy: "å …æŒç¸½æœƒçœ‹åˆ°å¸Œæœ›ï¼›é»é ­ä¹‹äº¤èˆ‡èƒŒå¾Œç®—è¨ˆã€‚" },
            { name: "åƒåœ¾äºº", prophecy: "ã€Œéƒ½èˆ‡æˆ‘ç„¡é—œã€åƒåœ¾è©±æ”»æ“Šï¼Œèˆ‡ç…™æ¯’è™è çš„å•ƒå™¬æ˜¯ä»–çš„æ‹¿æ‰‹å¥½æˆ²ã€‚" },
            { name: "æ‚£é›£èˆ‡å…±", prophecy: "æˆ‘åœ¨ï¼Œæ˜¯æœ€æœ‰åŠ›çš„ç›¾ç‰Œã€‚" },
            { name: "ä¸‰é ­å…­è‡‚", prophecy: "å„ç¨®ç–²å‹è½Ÿç‚¸ï¼Œä»Šå¤©æ˜¯å¿™ç¢Œçš„ä¸€å¤©ã€‚" },
            { name: "çˆ†æ‰“èœˆèš£", prophecy: "èœˆèš£ç™¼å‹•é­…æƒ‘å‚¬çœ ï¼Œè¢«è­˜ç ´å¾Œæ…˜é­çˆ†æ“Šã€‚" },
            { name: "å¤æ–‡æ˜ç¥æ˜", prophecy: "æ©«è·¨ä¸‰ç¨®æ™‚ç©ºä¹‹å¤ç¥æ˜ï¼Œé‡æƒ¡é­”è©›å’’æˆ–å°å°ï¼Œç¥è«­ç¤ºæŠ¹å»ä¸€åˆ‡å›åˆ°æœ€åˆã€‚" },
            { name: "ç™¼æ˜å®¶", prophecy: "æ‰€éœ€çš„é“å…·çš†ç”±å…¶ç™¼æ˜ï¼Œæ“æœ‰å‰µæ„åŠæŠ€èƒ½ï¼Œæ˜¯å€‹å‹•æ‰‹åšçš„å¯¦è¸å®¶ã€‚" },
            { name: "çŒ©çŒ©è»åœ˜", prophecy: "é‡åˆ°ä»¥æ¨™ç«¿ç‚ºåçš„çŒ©çŒ©åœ˜ï¼Œä»¥é é—œä¿‚è·Ÿè£å‚»æ©«é—–å¤©åœ°ã€‚" },
            { name: "ç¿ è±¬", prophecy: "ä»¥æŠ¹é»‘åˆ©ç”¨ä»–äººï¼Œé‚€åŠŸæå‡è‡ªå·±ç‚ºåï¼Œå¤§å‡¶ï¼Œé¿ä¹‹å”¯æä¸åŠã€‚" },
            { name: "ç¥ç§˜å¯¶ç‰©", prophecy: "æœƒé‡åˆ°æ„å¤–çš„é©šå–œå–”ï¼è½‰æ©Ÿå°‡è‡³ã€‚" },
            { name: "è£å¤ªå¤§", prophecy: "åƒæ¨¹æ‡¶ä¸€æ¨£æ…¢æ…¢æ‘¸ï¼Œè£å‚»çš„æ€§æ ¼ä¹Ÿæ˜¯ä¸€ç¨®è¶…å¼·é˜²è­·ç½©ï¼Œç•¶ä»Šå…¬å‹™å“¡æŠ€èƒ½ã€‚" },
            { name: "æ™‚å…‰é£›è‰‡", prophecy: "å¸¶ä½ ç©¿è¶Šæ™‚ç©ºï¼Œè¡ç ´é»‘æ´ï¼Œæ˜¯ä½ æœ€ä½³çš„é˜²ç¦¦å¤¥ä¼´ã€‚" },
            // å¡ç‰Œ 30 åˆ° 61 çš„ä½”ä½ç¬¦
        ];
        // ç‚ºäº†ç¢ºä¿æœ‰ 61 å€‹ä½”ä½ç¬¦ï¼Œæˆ‘å€‘æœƒå¡«å……å‰©ä¸‹çš„ç©ºé–“
        // æ³¨æ„ï¼šé€™è£¡ä½¿ç”¨ i <= totalCards ç¢ºä¿å¾ 1 åˆ° 61 (ç´¢å¼• 1 åˆ° 61)
        for (let i = cardProphecyData.length; i <= totalCards; i++) {
            if (i > 0) { // ç¢ºä¿ä¸å½±éŸ¿ç´¢å¼• 0
                 cardProphecyData.push({ 
                    name: `æœªä¾†å¡ç‰Œ #${i} (å¾…å¡«å¯«)`, 
                    prophecy: `ã€é è¨€æ–‡å­—ä½”ä½ç¬¦ ${i}ã€‘ï¼šé€™æ˜¯é ç•™çµ¦å¡ç‰‡ ${i} çš„ä½ç½®ã€‚è«‹ç”¨æ‚¨æä¾›çš„å¯¦éš›é è¨€æ›¿æ›æ­¤æ–‡å­—ã€‚` 
                });
            }
        }


        /**
         * åŸ·è¡ŒæŠ½å¡é‚è¼¯
         */
        function drawCard() {
            // æª¢æŸ¥æŒ‰éˆ•æ˜¯å¦è¢«ç¦ç”¨ï¼Œé˜²æ­¢é‡è¤‡é»æ“Š
            if (starButton.disabled) return;

            // 1. ç¦ç”¨æŒ‰éˆ•ä¸¦é–‹å§‹å‹•ç•«
            starButton.disabled = true;
            drawArea.classList.remove('animate-pulse-glow');
            
            // éš±è—æŠ½å¡å€ï¼Œé¡¯ç¤ºè®€å–å€
            drawArea.classList.add('hidden');
            loadingContainer.classList.remove('hidden');

            // è¨­ç½®å®šæ™‚å™¨æ¨¡æ“¬å‚³è¼¸å»¶é²
            setTimeout(() => {
                // 3. éš¨æ©ŸæŠ½å–å¡ç‰‡ (ç¯„åœ 1 åˆ° 61)
                const randomNumber = Math.floor(Math.random() * totalCards) + 1; 
                // æª”åæ ¼å¼: card_0 (X).jpg
                const cardFileName = `card_0 (${randomNumber}).jpg`;

                // 4. å¾è³‡æ–™çµæ§‹ä¸­ç²å–åç¨±å’Œé è¨€
                const cardInfo = cardProphecyData[randomNumber] || { 
                    name: `æ•¸æ“šç¼ºå¤±å¡ç‰Œ #${randomNumber}`, 
                    prophecy: `æ‰¾ä¸åˆ°è©²å¡ç‰‡çš„è³‡æ–™ï¼Œè«‹æª¢æŸ¥ cardProphecyData é™£åˆ—æ˜¯å¦å®Œæ•´ã€‚` 
                };
                
                const cardName = cardInfo.name;
                const prophecyText = cardInfo.prophecy;

                // 5. æ§‹å»ºå¡ç‰‡åœ–ç‰‡ URL (ä½¿ç”¨ç›¸å°è·¯å¾‘)
                const imgUrl = `images/${cardFileName}`;
                
                // 6. å‰µå»ºåœ–ç‰‡å…ƒç´ ä¸¦è¨­å®šå±¬æ€§
                const imgElement = document.createElement('img');
                imgElement.src = imgUrl;
                imgElement.alt = `æŠ½åˆ°çš„å¡ç‰‡: ${cardFileName}`;
                imgElement.className = 'card-result-img max-h-full max-w-full object-contain';
                
                // åœ–ç‰‡è¼‰å…¥å¤±æ•—æ™‚çš„è™•ç†
                imgElement.onerror = () => {
                    console.error(`åœ–ç‰‡è¼‰å…¥å¤±æ•—: ${imgUrl}`);
                    cardImageContainer.innerHTML = `<p class="text-red-500">ç„¡æ³•è¼‰å…¥åœ–ç‰‡ï¼š${cardFileName}ã€‚è«‹æª¢æŸ¥æª”æ¡ˆè·¯å¾‘æ˜¯å¦æ­£ç¢ºã€‚</p>`;
                    // å³ä½¿åœ–ç‰‡å¤±æ•—ï¼Œä¹Ÿè¦é¡¯ç¤ºæ–‡å­—
                    updateCardContent(cardName, prophecyText, false);
                };

                // åœ–ç‰‡è¼‰å…¥æˆåŠŸæ™‚çš„è™•ç†
                imgElement.onload = () => {
                    updateCardContent(cardName, prophecyText, true);
                };

                // å¦‚æœåœ–ç‰‡è¼‰å…¥æ²’æœ‰è§¸ç™¼ onerror æˆ– onload (ä¾‹å¦‚ç€è¦½å™¨å¿«å–)ï¼Œç›´æ¥æ›´æ–°å…§å®¹
                if (imgElement.complete) {
                    updateCardContent(cardName, prophecyText, true);
                }


                // 7. éš±è—è®€å–å€ï¼Œé¡¯ç¤ºçµæœè¦†è“‹å±¤
                loadingContainer.classList.add('hidden');
                cardResultOverlay.classList.remove('hidden');

                /**
                 * é›†ä¸­è™•ç†å¡ç‰‡å…§å®¹çš„æ›´æ–°èˆ‡é¡¯ç¤º
                 * @param {string} name å¡ç‰‡åç¨±
                 * @param {string} prophecy é è¨€å…§å®¹
                 * @param {boolean} imageLoaded åœ–ç‰‡æ˜¯å¦æˆåŠŸè¼‰å…¥
                 */
                function updateCardContent(name, prophecy, imageLoaded) {
                    // æ›´æ–°å¡ç‰‡åœ–ç‰‡
                    cardImageContainer.innerHTML = '';
                    if (imageLoaded) {
                        cardImageContainer.appendChild(imgElement);
                        imgElement.style.animation = 'reveal 0.5s ease-out forwards'; 
                    } else {
                        // åœ–ç‰‡è¼‰å…¥å¤±æ•—æ™‚é¡¯ç¤ºæ–‡å­—æç¤º
                        cardImageContainer.innerHTML = `<p class="text-red-500 p-4 border border-red-500 rounded-lg">å¡é¢è¼‰å…¥å¤±æ•— (æª”æ¡ˆ: ${cardFileName})</p>`;
                    }

                    // æ›´æ–°å¡ç‰‡åç¨±å’Œé è¨€
                    cardNameDisplay.textContent = name;
                    prophecyTextDisplay.textContent = prophecy;

                    // é‡æ–°å•Ÿç”¨æŒ‰éˆ•
                    starButton.disabled = false;
                }

                
            }, drawDuration);
        }

        /**
         * é‡è¨­éŠæˆ²ç‹€æ…‹ï¼Œè¿”å›é»‘æ´ç•«é¢
         */
        function resetGame() {
            // 1. éš±è—çµæœè¦†è“‹å±¤
            cardResultOverlay.classList.add('hidden');

            // 2. æ¸…ç©ºåœ–ç‰‡å®¹å™¨ (æº–å‚™ä¸‹æ¬¡æŠ½å¡)
            cardImageContainer.innerHTML = '';
            
            // 3. é¡¯ç¤ºæŠ½å¡å€ï¼Œä¸¦é‡æ–°å•Ÿå‹•å…‰èŠ’å‹•ç•«
            drawArea.classList.remove('hidden');
            drawArea.classList.add('drawing-card-pulse'); // è®“é»‘æ´å…ˆè„ˆè¡ä¸€æ¬¡ï¼Œè¦–è¦ºä¸Šæ›´å‹•æ…‹
            starButton.classList.add('animate-pulse-glow');
        }

        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // ç¢ºä¿åˆå§‹ç‹€æ…‹æ˜¯ï¼šé»‘æ´é¡¯ç¤ºï¼Œçµæœéš±è—
            drawArea.classList.remove('hidden');
            starButton.classList.add('animate-pulse-glow');
            cardResultOverlay.classList.add('hidden');
            loadingContainer.classList.add('hidden');
        });
    </script>
</body>
</html>
